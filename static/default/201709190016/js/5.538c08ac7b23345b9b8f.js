webpackJsonp([5,16],{31:function(e,t,a){a(77);var s=a(1)(a(167),a(142),null,null);e.exports=s.exports},57:function(e,t,a){t=e.exports=a(3)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:"webpack://"}])},77:function(e,t,a){var s=a(57);"string"==typeof s&&(s=[[e.id,s,""]]);a(4)(s,{});s.locals&&(e.exports=s.locals)},142:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p2222"},[a("div",{staticClass:"p2020 m0020 bor-bottom pos-re"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/article"}}},[e._v("文章列表")])],1),e._v(" "),a("div",{staticClass:"bread-btn"},[a("router-link",{attrs:{to:{path:"/article/add"}}},[a("el-button",{attrs:{icon:"plus",type:"primary",size:"small"}},[e._v("添加")])],1)],1)],1),e._v(" "),a("el-select",{staticClass:"m0020",staticStyle:{width:"130px"},attrs:{size:"small",placeholder:"请选择分类"},on:{change:e.handleChangeGetType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{label:"全部分类",value:"-1"}}),e._v(" "),e._l(e.articleType,function(e,t){return a("el-option",{attrs:{label:e,value:t}})})],2),e._v(" "),a("el-select",{staticClass:"m0020",staticStyle:{width:"130px"},attrs:{size:"small",placeholder:"请选择来源"},on:{change:e.handleChangeGetSource},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},[a("el-option",{attrs:{label:"全部来源",value:"-1"}}),e._v(" "),e._l(e.sourceType,function(e,t){return a("el-option",{attrs:{label:e,value:t}})})],2),e._v(" "),a("el-select",{staticClass:"m0020",staticStyle:{width:"130px"},attrs:{size:"small",placeholder:"请选择显示状态"},on:{change:e.handleChangeGetDisplay},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[a("el-option",{attrs:{label:"全部显示状态",value:"-1"}}),e._v(" "),e._l(e.displayType,function(e,t){return a("el-option",{attrs:{label:e,value:t}})})],2),e._v(" "),a("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:e.articles,stripe:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"digest",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"分类",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"m0020",staticStyle:{width:"150px",display:"inline"},attrs:{size:"small",placeholder:"请选择文章分类"},on:{change:function(a){e.handleType(t.row)}},model:{value:t.row.type,callback:function(e){t.row.type=e},expression:"scope.row.type"}},e._l(e.articleType,function(e,t){return a("el-option",{attrs:{label:e,value:t}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"display",label:"首页显示",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","on-text":"是","off-text":"否"},on:{change:function(a){e.handleSwitch(t.row)}},model:{value:t.row.display,callback:function(e){t.row.display=e},expression:"scope.row.display"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_date",label:"发布日期",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.source?a("router-link",{staticStyle:{"margin-right":"10px"},attrs:{to:{path:"/article/edit/"+t.row.id}}},[a("el-button",{attrs:{size:"small"}},[e._v("编辑")])],1):a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"m2020",attrs:{layout:"prev, pager, next,jumper",total:e.total,"current-page":e.currentpage,"page-size":e.page},on:{"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]}},167:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{displayType:{0:"不显示",1:"显示"},articleType:{0:"未分类",1:"公司新闻",2:"品牌活动",3:"每周学生营养餐菜单",4:"对外招标信息"},sourceType:{0:"微信",1:"站内编写"},articles:[],dialogChangeType:!1,dialogChangeDisplay:!1,typeValue:"",displayValue:"",currentID:"",source:"-1",type:"-1",display:"-1",page:10,offset:0,total:0,currentpage:1,changepage:!1}},computed:{},mounted:function(){this.getArticle(!0)},attached:function(){},methods:{getArticle:function(e){var t=this;this.changepage=!0;var a=this;e&&(this.offset=0,this.currentpage=1),this.$rqt.post("/article/get_article_list",{page:this.page,offset:this.offset,type:this.type||-1,source:this.source||-1,display:this.display||-1}).success(function(e){var s=[];e.data.articles.forEach(function(e){e.display=1==e.display,s.push(e)}),t.articles=s,t.total=e.data.total,setTimeout(function(){a.changepage=!1},300)})},handleCurrentChange:function(e){this.offset=this.page*(e-1),this.getArticle(),this.currentpage=e},handleSwitch:function(e){console.log(e),this.displayValue=e.display===!0?"0":"1",this.currentID=e.id,this.changeDisplay()},handleChangeGetType:function(e){this.type=e,this.getArticle(!0)},handleChangeGetSource:function(e){this.source=e,this.getArticle(!0)},handleChangeGetDisplay:function(e){this.display=e,this.getArticle(!0)},handleDetail:function(e,t){console.log(e,t);var a=t.url;window.open(a)},handleType:function(e){this.changepage||(console.log(e),this.typeValue=e.type,this.currentID=e.id,this.changeType())},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteSubmit(t.id)}).catch(function(e){console.log(e)})},changeType:function(){var e=this;this.$rqt.post("/article/change_type",{type:this.typeValue,id:this.currentID}).success(function(t){e.$message({message:t.msg,type:"success"})})},changeDisplay:function(){var e=this;this.$rqt.post("/article/change_display",{display:this.displayValue,id:this.currentID}).success(function(t){e.$message({message:t.msg,type:"success"})})},deleteSubmit:function(e){var t=this;this.$rqt.post("/article/delete",{id:e}).success(function(e,a){e.code?(t.getArticle(),t.$message({message:e.msg,type:"success"})):t.$message({message:e.msg,type:"info"})})}},components:{}}}});
//# sourceMappingURL=5.538c08ac7b23345b9b8f.js.map